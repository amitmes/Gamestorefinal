@model IEnumerable<GamesStore.Models.Games>

@{
    ViewData["Title"] = "Home Page";

}
<link rel="stylesheet" href="~/css/home.css" />

<body>
    <table align="center">
        <tbody>
            <label id="newlabel" class="newlabel">Newest Games</label>
            <tr>
                <td>

                    <div class="slideshow-container">

                        @{ int count = 1;
                            foreach (var item in Model)
                            {
                                if (DateTime.Now.Year - item.Releasedate.Year < 3)
                                {
                                    string img = Convert.ToBase64String(item.Image);
                                    <div class="mySlides">
                                        <a class="a1" name="@item.Id" href="@Url.Action("Details", "Games", new { id = item.Id })">
                                            <img class="newestgames" src="data:/image/jpg;base64,@img" onclick="">
                                        </a>
                                        <div class="text">@item.Name</div>
                                    </div>
                                    count++;
                                }

                            }
                        }
                        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                        <a class="next" onclick="plusSlides(1)">&#10095;</a>

                    </div>
                    <br />
                    <div style="text-align:center">
                        @for (int i = 1; i < count; i++)
                        {
                            <span class="dot" onclick="currentSlide(@i)"></span>
                        }
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <br /> <br />
    <div id="car" class="car">
        <label id="newlabel2" class="newlabel">Last chance of buying</label>
        <br /> <br /> <br /> <br />
        <div class="container_car">

            <div class="carousel">

                @{
                    var listMin = Model.OrderBy(x => x.Onstock).Take(6).ToList();
                    string img2 = Convert.ToBase64String(listMin[0].Image);
                    <div class="item a ">
                        <a class="a1" name="@listMin[0].Id" href="@Url.Action("Details", "Games", new { id = listMin[0].Id })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>
                    </div>
                    img2 = Convert.ToBase64String(listMin[1].Image);
                    <div class="item b">
                        <a class="a1" name="@listMin[1].Id" href="@Url.Action("Details", "Games", new { id = listMin[1].Id })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>
                    </div>
                    img2 = Convert.ToBase64String(listMin[2].Image);
                    <div class="item c">
                        <a class="a1" name="@listMin[2].Id" href="@Url.Action("Details", "Games", new { id = listMin[2].Id })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>
                    </div>
                    img2 = Convert.ToBase64String(listMin[3].Image);
                    <div class="item d">
                        <a class="a1" name="@listMin[3].Id" href="@Url.Action("Details", "Games", new { id = listMin[3].Id })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>
                    </div>
                    img2 = Convert.ToBase64String(listMin[4].Image);
                    <div class="item e">
                        <a class="a1" name="@listMin[4].Id" href="@Url.Action("Details", "Games", new { id = listMin[4].Id  })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>
                    </div>
                    img2 = Convert.ToBase64String(listMin[5].Image);
                    <div class="item f">
                        <a class="a1" name="@listMin[5].Id" href="@Url.Action("Details", "Games", new { id = listMin[5].Id })">
                            <img class="newestgames1" src="data:/image/jpg;base64,@img2" onclick="">
                        </a>

                    </div>
                }

            </div>
        </div>
        <br /> <br />
        <div class="btn btn-secondary prev_car">Prev</div>
        <div class="btn btn-secondary next_car" align="right">Next</div>

    </div>

</body>




<!--footer-->
<div class="main-footer">

    <div class="footer-content">

        <div class="footer-section about">
            <h1 class="logo-text"><span>Our</span>web</h1>
            <p>infotmation on our website</p>
            <div class="contact">
                <span><i class="fas fa-phone"></i>&nbsp;050-456-345</span>
                <span><i class="fas fa-envelope"></i>&nbsp;info@gmail.com</span>
            </div>

            <div class="socials">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>

        </div>
        <div class="footer-section links ">
            <h2> Quick links </h2>
            <br />
            <ul>
                <a href="#"><li>Events</li></a>
                <a href="#"><li>Team</li></a>
                <a href="#"><li>Mentores</li></a>
                <a href="#"><li>Gallery</li></a>
                <a href="#"><li>Terms and Conditions</li></a>
            </ul>
        </div>
        <div class="footer-section contact-from ">
            <h2> Contact us </h2>
            <br />
            <form action="index.html" method="post">
                <input type="email" name="email" class="text-input contact-input" placeholder="Your email addresss.." />
                <textarea rows="4" name="message" class="text-input contact-input" placeholder="Your message..."></textarea>
                <button type="submit" class="btn btn-big contact-btn">
                    <i class="fas fa-envelope">Send</i>
                </button>
            </form>
        </div>

    </div>

     <div class="footer-bottom">
         &copy; 2021-Gamestorefinal-<a class="text-white" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        <a class="text-white" asp-area="" asp-controller="Home" asp-action="About">About</a>

     </div>
</div >











    @section Scripts{
        <script>
            var slideIndex = 1;
            showSlides(slideIndex);
            // Next/previous controls
            function plusSlides(n) {
                showSlides(slideIndex += n);
            }

            // Thumbnail image controls
            function currentSlide(n) {
                showSlides(slideIndex = n);
            }
            function showSlides(n) {
                var i;
                var slides = document.getElementsByClassName("mySlides");
                var dots = document.getElementsByClassName("dot");
                if (n > slides.length) { slideIndex = 1 }
                if (n < 1) { slideIndex = slides.length }
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }
                for (i = 0; i < dots.length; i++) {
                    dots[i].className = dots[i].className.replace(" active", "");
                }
                slides[slideIndex - 1].style.display = "block";
                dots[slideIndex - 1].className += " active";
            }
        </script>

        <script src="~/js/gamedetailhome.js"></script>
        <script type="text/html" id="detailsbody">
            <tr>
                <td>
            <tr>
                <td>

                    <div class="gameTitle">{name}</div>
                    <br />
                    <br />
                    <div class="d-flex" style="height:700px; ">


                        <div class="col-5">
                            <img src="data:/image/jpg;base64,{image}" class="card-img-top" alt="..." style="width:100%; height:90%; border-radius: 20px;"></img>
                        </div>
                        <div class="col-7" style="background-color: darkgrey; border-radius: 20px; height: 90%;">
                            <dt class="col-sm-2" style="padding-left:0;">
                                Description:
                            </dt> {description}
                            <br />
                            <div class="row">
                                <dt class="col-sm-3">
                                    Release date:
                                </dt>
                                <dd class="col-sm-9">
                                    {releasedate}
                                </dd>
                            </div>

                            <div class="row">
                                <dt class="col-sm-3">
                                    On stock:
                                </dt>
                                <dd class="col-sm-9">
                                    {onstock}
                                </dd>
                            </div>
                            <br />
                            <div class="row">
                                <dt class="col-sm-3">
                                    Price:
                                </dt>
                                <dd class="col-sm-9">
                                    {price} $
                                </dd>
                            </div>

                        </div>

                    </div>
                    <div class="row">
                        <dt class="col-sm-2">
                            System requiremnts:
                        </dt>
                        <dd class="col-sm-10">
                            {systemrequiremnts}
                        </dd>
                    </div>



                    <div class="row">
                        <dt class="col-sm-2">
                            Trailer:
                        </dt>
                        <dd class="col-sm-10">
                            <iframe width="420" height="315"
                                    src="{trailer}">
                            </iframe>

                        </dd>
                    </div>

                </td>
            </tr>

        </script>

        <script>

            var carousel = $(".carousel"),
                currdeg = 0;

            $(".next_car").on("click", { d: "n" }, rotate);
            $(".prev_car").on("click", { d: "p" }, rotate);

            function rotate(e) {
                if (e.data.d == "n") {
                    currdeg = currdeg - 60;
                }
                if (e.data.d == "p") {
                    currdeg = currdeg + 60;
                }
                carousel.css({
                    "-webkit-transform": "rotateY(" + currdeg + "deg)",
                    "-moz-transform": "rotateY(" + currdeg + "deg)",
                    "-o-transform": "rotateY(" + currdeg + "deg)",
                    "transform": "rotateY(" + currdeg + "deg)"
                });
            }

        </script>



    }


